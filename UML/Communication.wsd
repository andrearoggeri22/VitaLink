@startuml "Diagramma di Comunicazione VitaLink"
' Diagramma di Comunicazione
actor "Healthcare Professional" as Doctor
participant "Web Interface" as UI
participant "Patient Controller" as PatientCtrl
participant "Vital Signs Controller" as VitalCtrl
participant "Database" as DB
participant "Audit System" as Audit
participant "Notification Service" as Notif
participant "Fitbit Integration" as Fitbit

Doctor -> UI: 1. Login
UI -> Doctor: 2. Display Dashboard

Doctor -> UI: 3. Select Patient
UI -> PatientCtrl: 4. GetPatient(uuid)
PatientCtrl -> DB: 5. Query
DB -> PatientCtrl: 6. Patient Data
PatientCtrl -> Audit: 7. LogAction()
PatientCtrl -> UI: 8. Patient Details
UI -> Doctor: 9. Display Details

Doctor -> UI: 10. Add Vital Sign
UI -> VitalCtrl: 11. AddVitalSign()
VitalCtrl -> DB: 12. Save
DB -> VitalCtrl: 13. Success
VitalCtrl -> Audit: 14. LogAction()
VitalCtrl -> Notif: 15. CheckAbnormalValues()
Notif -> Doctor: 16. SMS Alert (if abnormal)
VitalCtrl -> UI: 17. Result
UI -> Doctor: 18. Update Display

Doctor -> UI: 19. Connect Device
UI -> Fitbit: 20. CheckConnection()
Fitbit -> UI: 21. Connection Status
UI -> Doctor: 22. Display Status
Doctor -> UI: 23. Upload Data
UI -> Fitbit: 24. ExtractData()
Fitbit -> VitalCtrl: 25. SaveVitals()
VitalCtrl -> DB: 26. Batch Save
DB -> VitalCtrl: 27. Success
VitalCtrl -> UI: 28. Result
UI -> Doctor: 29. Display Updated Data
@enduml