@startuml VitaLink - Package Diagram

' Stile e configurazione
skinparam packageStyle rectangle
skinparam package {
    BackgroundColor #f0f0f0
    BorderColor #555555
}
skinparam arrow {
    Color #666666
}

title VitaLink - Package Diagram

' Pacchetto principale
package "VitaLink" {
    package "app" as App {
        ' Core application
        package "__init__" as Init
        package "app" as AppCore
        package "main" as Main
        
        ' Data models
        package "models" as Models
        
        ' Authentication and user management
        package "auth" as Auth
        
        ' Views and controllers
        package "views" as Views
        package "api" as API
        
        ' Health platform integration
        package "health_platforms" as HealthPlatforms
        package "health_platforms_config" as HealthPlatformsConfig
        
        ' Observations system
        package "observations" as Observations
        
        ' Utilities and support
        package "utils" as Utils
        package "audit" as Audit
        package "reports" as Reports
        package "language" as Language
        
        ' Database migration tools
        package "migrate" as Migrate
        package "compile_translations" as CompileTranslations
    }
    
    package "static" as Static {
        package "css" as CSS
        package "js" as JS
        package "img" as Images
    }
    
    package "templates" as Templates {
        package "auth_templates" as AuthTemplates
        package "patient_templates" as PatientTemplates
        package "dashboard_templates" as DashboardTemplates
        package "report_templates" as ReportTemplates
    }
    
    package "translations" as Translations {
        package "en" as EnLang
        package "it" as ItLang
    }
    
    package "instance" as Instance {
        package "healthcare_db" as DB
    }
    
    package "migrations" as Migrations {
        package "versions" as MigrationsVersions
    }
    
    package "tests" as Tests {
        package "unit_tests" as UnitTests
        package "integration_tests" as IntegrationTests
    }
}

' Relazioni di dipendenza tra i pacchetti
AppCore <-- Init
Main --> AppCore

Models <-- AppCore
Auth --> Models
Views --> Models
API --> Models
HealthPlatforms --> Models
Observations --> Models
Audit --> Models
Reports --> Models

Auth --> Utils
Views --> Utils
API --> Utils
HealthPlatforms --> Utils
Observations --> Utils
Reports --> Utils

Views --> Auth
API --> Auth

HealthPlatformsConfig <-- HealthPlatforms

Views --> Audit
API --> Audit
HealthPlatforms --> Audit

Views --> Templates
Auth --> Templates

CompileTranslations --> Translations
Language --> Translations

Migrate --> Models
Migrate --> Migrations

AppCore --> DB

' Gruppi logici
Views -[hidden]down-> API
API -[hidden]down-> Observations
Observations -[hidden]down-> Reports

Auth -[hidden]down-> HealthPlatforms
HealthPlatforms -[hidden]down-> Utils
Utils -[hidden]down-> Audit

@enduml
