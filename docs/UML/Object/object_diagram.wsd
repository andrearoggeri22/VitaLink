@startuml VitaLink - Object Diagram

' Stile e configurazione
skinparam object {
    BackgroundColor #f0f0f0
    BorderColor #555555
}
skinparam arrow {
    Color #666666
}

title VitaLink - Object Diagram (Runtime Instance Example)

' Oggetti Doctor
object "dottore1 : Doctor" as doc1 {
    id = 1
    email = "mario.rossi@example.com"
    first_name = "Mario"
    last_name = "Rossi"
    specialty = "Cardiologia"
}

object "dottore2 : Doctor" as doc2 {
    id = 2
    email = "laura.bianchi@example.com"
    first_name = "Laura"
    last_name = "Bianchi"
    specialty = "Pneumologia"
}

' Oggetti Patient
object "paziente1 : Patient" as pat1 {
    id = 1
    uuid = "f7d8e9c0-1234-5678-90ab-cdef01234567"
    first_name = "Giovanni"
    last_name = "Verdi"
    date_of_birth = "1975-05-15"
    gender = "M"
    connected_platform = "fitbit"
    platform_access_token = "xyz123..."
}

object "paziente2 : Patient" as pat2 {
    id = 2
    uuid = "a1b2c3d4-5678-90ab-cdef-ghijklmnopqr"
    first_name = "Anna"
    last_name = "Neri"
    date_of_birth = "1982-09-21"
    gender = "F"
}

object "paziente3 : Patient" as pat3 {
    id = 3
    uuid = "e5f6g7h8-90ab-cdef-ghij-klmnopqrstuv"
    first_name = "Marco"
    last_name = "Gialli"
    date_of_birth = "1990-11-03"
    gender = "M"
}

' Oggetti DoctorPatient
object "rel1 : DoctorPatient" as rel1 {
    doctor_id = 1
    patient_id = 1
    assigned_date = "2024-01-15 10:30:00"
}

object "rel2 : DoctorPatient" as rel2 {
    doctor_id = 1
    patient_id = 2
    assigned_date = "2024-02-20 14:45:00"
}

object "rel3 : DoctorPatient" as rel3 {
    doctor_id = 2
    patient_id = 1
    assigned_date = "2024-03-10 09:15:00"
}

object "rel4 : DoctorPatient" as rel4 {
    doctor_id = 2
    patient_id = 3
    assigned_date = "2024-04-05 16:20:00"
}

' Oggetti Note
object "nota1 : Note" as note1 {
    id = 1
    patient_id = 1
    doctor_id = 1
    content = "Il paziente mostra segni di miglioramento nella pressione sanguigna"
    created_at = "2024-01-18 11:20:00"
}

object "nota2 : Note" as note2 {
    id = 2
    patient_id = 1
    doctor_id = 2
    content = "Funzione polmonare leggermente compromessa"
    created_at = "2024-03-15 10:45:00"
}

' Oggetti VitalObservation
object "obs1 : VitalObservation" as obs1 {
    id = 1
    patient_id = 1
    doctor_id = 1
    vital_type = "heart_rate"
    content = "Frequenza cardiaca elevata durante l'esercizio fisico"
    start_date = "2024-01-10"
    end_date = "2024-01-17"
}

object "obs2 : VitalObservation" as obs2 {
    id = 2
    patient_id = 3
    doctor_id = 2
    vital_type = "breathing_rate"
    content = "Respirazione normale durante il riposo"
    start_date = "2024-04-10"
    end_date = "2024-04-20"
}

' Oggetti HealthPlatformLink
object "link1 : HealthPlatformLink" as link1 {
    id = 1
    uuid = "h9i8j7k6-1234-5678-90ab-lmnopqrstuv"
    patient_id = 1
    doctor_id = 1
    platform = "fitbit"
    used = true
}

' Oggetti AuditLog
object "log1 : AuditLog" as log1 {
    id = 1
    doctor_id = 1
    action_type = "CREATE"
    entity_type = "patient"
    entity_id = 1
    patient_id = 1
    timestamp = "2024-01-15 10:30:00"
}

object "log2 : AuditLog" as log2 {
    id = 2
    doctor_id = 1
    action_type = "CREATE"
    entity_type = "note"
    entity_id = 1
    patient_id = 1
    timestamp = "2024-01-18 11:20:00"
}

' Relazioni
doc1 -- rel1
doc1 -- rel2
doc2 -- rel3
doc2 -- rel4

pat1 -- rel1
pat2 -- rel2
pat1 -- rel3
pat3 -- rel4

doc1 -- note1
doc2 -- note2

pat1 -- note1
pat1 -- note2

pat1 -- obs1
pat3 -- obs2

doc1 -- obs1
doc2 -- obs2

pat1 -- link1
doc1 -- link1

doc1 -- log1
doc1 -- log2
log1 -- pat1
log2 -- pat1

@enduml
